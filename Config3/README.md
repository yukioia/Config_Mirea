# Учебный конфигурационный язык

Эта программа анализирует упрощенный конфигурационный язык, выполняет вычисления и сохраняет результат в формате TOML.

## Задание №3 
Разработать инструмент командной строки для учебного конфигурационного 
языка, синтаксис которого приведен далее. Этот инструмент преобразует текст из 
входного формата в выходной. Синтаксические ошибки выявляются с выдачей 
сообщений. 

Входной текст на учебном конфигурационном языке принимается из 
стандартного ввода. Выходной текст на языке toml попадает в файл, путь к 
которому задан ключом командной строки. 

- Однострочные комментарии: 
`|| Это однострочный комментарий`

- Многострочные комментарии: 
`(* 
Это многострочный 
комментарий 
*) `

- Массивы: 
`{ значение. значение. значение. ... }`

- Имена: 
`[_a-zA-Z]+ `

- Значения: 
`
• Числа. 
• Массивы.`

- Объявление константы на этапе трансляции:
`set имя = значение`

- Вычисление константного выражения на этапе трансляции (постфиксная 
форма), пример: 
`![имя 1 +] `

Результатом вычисления константного выражения является значение. 

Для константных вычислений определены операции и функции: 
1. Сложение. 
2. Вычитание. 
3. Умножение. 
4. sqrt().
   
Все конструкции учебного конфигурационного языка (с учетом их 
возможной вложенности) должны быть покрыты тестами. Необходимо показать 2 
примера описания конфигураций из разных предметных областей.

## Требования

- Python 3.7 или выше

## Запуск программы

Программа принимает ввод из стандартного ввода и записывает результат в указанный выходной файл.

### Использование:

```bash
python script.py <output_path>
```

- `<output_path>`: путь к выходному файлу в формате TOML.

### Пример:

Создайте файл `input.txt` со следующим содержимым:

```
set a = 10
set b = 20
set c = {1.0.2.0.3.0}
![ a b + sqrt ]
```

Запустите программу:

```bash
python script.py output.toml < input.txt
```

В результате будет создан файл `output.toml` со следующим содержимым:

```toml
a = 10.0
b = 20.0
c = [1.0, 2.0, 3.0]
result_1 = 14.142135623730951
```

## Тестирование

Пример теста:

```python
import subprocess
import os

def test_program():
    input_code = """set x = 5
set y = 15
![ x y + ]
"""
    expected_output = """x = 5.0
y = 15.0
result_1 = 20.0
"""

    with open("test_input.txt", "w") as f:
        f.write(input_code)

    subprocess.run(
        ["python", "script.py", "test_output.toml"],
        stdin=open("test_input.txt"),
        check=True
    )

    with open("test_output.toml", "r") as f:
        output = f.read()

    assert output.strip() == expected_output.strip(), "Выходные данные не совпадают"

    os.remove("test_input.txt")
    os.remove("test_output.toml")

    print("Тест пройден: программа работает корректно")

if __name__ == "__main__":
    test_program()
```

## Замечания

В операциях используются идентификаторы, определенные с помощью ключевого слова `set`. Несуществующие идентификаторы вызовут ошибку.

